{%load static %}
<div class = "card">
    <div class = "card-header">
        <h3 class = "card-title">
            과거 발전량 데이터
        </h3>
    </div>
    <div class = "card-body">
        <div id="jsGrid" class="scroll"></div>
        <div id="externalPager" class="text-center text-white"></div>
    </div>
</div>

<script src="/static/admin-lte/plugins/jquery/jquery.min.js"></script>

<script>

    let data = JSON.parse("{{ table_datas|escapejs }}"); //json형식으로 받은 데이터를 javascript에 넣을 때 써야함.

    let fields = [] 
    for (key in data[0]){
        fields.push({name : key})
    }
    
    $(function () {
        $("#jsGrid").jsGrid({ //TODO : jsgrid 사용법 익히고 꾸미기
            locale:"ko",
            width: "100%",
            height: '460px', //가능하면 수정 필요

            autoload: true, //데이터 변경, 추가, 삭제대하여 자동으로 로드되게 함
            sorting: true, // 칼럼의 헤더를 눌렀을 때, 그 헤더를 통한 정렬
            paging: true,
            
            pageSize: 10, //화면에 나타날 기본 줄수
            pageButtonCount: 5,
            pagerContainer: "#externalPager",
            pagerFormat: "{first} {prev} {pages} {next} {last} &nbsp;&nbsp; {pageIndex} / {pageCount}",
            pagePrevText: "<i class='fas fa-chevron-left'></i>",
            pageNextText: "<i class='fas fa-chevron-right'></i>",
            pageFirstText: "<i class='fas fa-chevron-left'></i><i class='fas fa-chevron-left'></i>",
            pageLastText: "<i class='fas fa-chevron-right'></i><i class='fas fa-chevron-right'></i>",
            pageNavigatorNextText: "&#8230;",
            pageNavigatorPrevText: "&#8230;",

            
            data: data, // 데이터를 받아서 
            fields: fields, // 그리드 헤더 부분에 넣기 위해서 필드 지정 
        })
    })
</script>